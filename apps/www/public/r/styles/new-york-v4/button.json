{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "button",
  "type": "registry:ui",
  "dependencies": [
    "@radix-ui/react-slot"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/ui/button.tsx",
      "content": "import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonTraceProps {\n  /**\n   * Enable tracing for this button\n   * Pass a string to use as component name, or true to use default name\n   * Tracing only happens on the client side\n   */\n  trace?: string | boolean\n  \n  /**\n   * Additional metadata to include in traces\n   */\n  traceMetadata?: Record<string, string | number | boolean>\n}\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  trace,\n  traceMetadata,\n  onClick,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  } & ButtonTraceProps) {\n  const Comp = asChild ? Slot : \"button\"\n\n  // Wrap onClick to add tracing - works both server and client\n  const handleClick = trace ? (event: React.MouseEvent<HTMLButtonElement>) => {\n    // Only trace on client side\n    if (typeof window !== 'undefined') {\n      const componentName = typeof trace === 'string' ? trace : 'Button'\n      \n      // Dynamically import tracer to avoid server-side execution\n      import('@/lib/tracing/tracer').then(({ ComponentTracer }) => {\n        import('@/lib/tracing/types').then(({ ComponentStatus }) => {\n          let statusCode: number = ComponentStatus.OK\n          let errorMessage: string | undefined\n          \n          try {\n            // Call original onClick\n            onClick?.(event)\n          } catch (error) {\n            // Catch errors from user's onClick handler\n            statusCode = ComponentStatus.ERROR\n            errorMessage = error instanceof Error ? error.message : String(error)\n            \n            // Re-throw so it doesn't silently fail\n            throw error\n          } finally {\n            // Record trace with appropriate status\n            ComponentTracer.recordInteraction(\n              componentName,\n              'click',\n              {\n                'component.type': 'interaction',\n                'component.variant': variant || 'default',\n                'component.size': size || 'default',\n                ...(errorMessage && { 'error.message': errorMessage }),\n                ...traceMetadata,\n              },\n              statusCode as any\n            )\n          }\n        })\n      }).catch(() => {\n        // Silently fail if tracing not available\n      })\n    } else {\n      // Server-side or no window, just call onClick\n      onClick?.(event)\n    }\n  } : onClick\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      onClick={handleClick}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n",
      "type": "registry:ui"
    }
  ]
}